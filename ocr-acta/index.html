<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OCR Acta – Preciso (OpenCV + Tesseract)</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap">

<!-- 1) Config para que busque el .wasm en el CDN -->
<script>
  window.Module = {
    locateFile: (path) =>
      `https://cdn.jsdelivr.net/npm/@techstark/opencv-js@4.9.0-1/${path}`
  };
</script>

<!-- 2) OpenCV (luego del Module) -->
<script async src="https://cdn.jsdelivr.net/npm/@techstark/opencv-js@4.9.0-1/opencv.js"></script>

<!-- 3) Tesseract y tu app (como ya tenías) -->
<script defer src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.5/dist/tesseract.min.js"></script>
<script defer src="app.js?v=111"></script>

</head>
<body>
  <main class="wrap">
    <h1>Lectura exacta de Actas</h1>

    <section class="card">
      <div class="grid">
        <label>Distrito <input id="inpDistrito" placeholder=""></label>
        <label>Circuito <input id="inpCircuito" placeholder=""></label>
        <label>Mesa     <input id="inpMesa" placeholder=""></label>
      </div>

      <div class="row">
        <input type="file" id="fileActa" accept="image/*" />
        <button class="btn primary" id="btnLeer" disabled>Cargando OCR…</button>
        <span class="status" id="ocrStatus">—</span>
      </div>

      <div class="meta">
        <span class="tag" id="confTag">Conf: —</span>
        <span class="tag" id="sumTag">Suma total: — / —</span>
      </div>

      <!-- canvases ocultos (debug) -->
      <canvas id="cvIn"  style="display:none"></canvas>
      <canvas id="cvBin" style="display:none"></canvas>

      <h3>Resultados detectados</h3>
      <div class="scroll">
        <table id="tablaResultados">
          <thead><tr><th>Partido</th><th>Diputados</th><th>Concejales</th></tr></thead>
          <tbody></tbody>
          <tfoot>
            <tr><th>Total votos agrupaciones</th><td id="totDip">—</td><td id="totCon">—</td></tr>
            <tr><th>Votos en blanco</th>        <td id="blDip">—</td><td id="blCon">—</td></tr>
            <tr><th>Identidad impugnada</th>    <td id="imp">—</td><td>—</td></tr>
            <tr><th>Sobre N°3</th>              <td id="sob3Dip">—</td><td id="sob3Con">—</td></tr>
            <tr><th><b>Suma total</b></th>      <td id="sumDip"><b>—</b></td><td id="sumCon"><b>—</b></td></tr>
          </tfoot>
        </table>
      </div>

      <div class="row end">
        <button class="btn" id="btnEditar">Editar a mano</button>
      </div>
    </section>
    <div class="toast" id="toast"></div>
  </main>
</body>
</html>
